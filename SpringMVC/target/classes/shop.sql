drop database Shop;
create database Shop;
use Shop;
create table CHUCVU (
	MACHUCVU INT identity(1,1) primary key,
	TENCHUCVU NVARCHAR(20)
)

CREATE TABLE NHANVIEN (
	MANHANVIEN INT IDENTITY(1,1) PRIMARY KEY,
	HOTEN NVARCHAR(30),
	DIACHI NVARCHAR(300),
	GIOITINH BIT,
	CMND NVARCHAR(20),
	MACHUCVU INT,
	FOREIGN KEY (MACHUCVU) REFERENCES CHUCVU(MACHUCVU),
	TENDANGNHAP NVARCHAR(20),
	MATKHAU NVARCHAR(20) 
)

CREATE TABLE DANHMUCSANPHAM(
	MADANHMUC INT IDENTITY(1,1) PRIMARY KEY,
	TENDANHMUC NVARCHAR(100),
	HINHDANHMUC TEXT
)

CREATE TABLE SANPHAM (
	MASANPHAM INT IDENTITY(1,1) PRIMARY KEY,
	MADANHMUC INT,
	FOREIGN KEY (MADANHMUC) REFERENCES DANHMUCSANPHAM(MADANHMUC),
	TENSANPHAM NVARCHAR(50),
	MOTA TEXT,
	HINHSANPHAM TEXT,
)

CREATE TABLE MAUSANPHAM(
	MAMAU INT IDENTITY(1,1) PRIMARY KEY,
	TENMAU NVARCHAR(20)
)

CREATE TABLE SIZESANPHAM (
	MASIZE INT IDENTITY(1,1) PRIMARY KEY,
	SIZE NVARCHAR
)

CREATE TABLE CHITIETSANPHAM (
	MACHITIETSANPHAM INT IDENTITY(1,1) PRIMARY KEY,
	MASANPHAM INT REFERENCES SANPHAM(MASANPHAM),
	MASIZE INT REFERENCES SIZESANPHAM(MASIZE),
	MAMAU INT REFERENCES MAUSANPHAM(MAMAU),
	SOLUONG INT,
	NGAYNHAP NVARCHAR(10)
)

CREATE TABLE KHUYENMAI(
	MAKHUYENMAI INT IDENTITY(1,1) PRIMARY KEY,
	TENKHUYENMAI NVARCHAR(50),
	THOIGIANBATDAU NVARCHAR(10),
	THOIGIANKETTHUC NVARCHAR(10),
	MOTA TEXT,
	HINHKHUYENMAI TEXT,
	GIAGIAM INT
)

CREATE TABLE CHITIETKHUYENMAI(
	MAKHUYENMAI INT REFERENCES KHUYENMAI(MAKHUYENMAI),
	MASANPHAM INT REFERENCES SANPHAM(MASANPHAM),
	PRIMARY KEY (MAKHUYENMAI, MASANPHAM),
)

CREATE TABLE HOADON(
	MAHOADON INT IDENTITY(1,1) PRIMARY KEY,
	TENKHACHHANG NVARCHAR(30),
	SODT NVARCHAR(15),
	DIACHIGIAOHANG NVARCHAR(200),
	TINHTRANG BIT,
	NGAYLAP NVARCHAR(50)
)

CREATE TABLE CHITIETHOADON(
	MAHOADON INT REFERENCES HOADON(MAHOADON),
	MACHITIETSANPHAM INT REFERENCES CHITIETSANPHAM(MACHITIETSANPHAM),
	SOLUONG INT,
	GIATIEN NVARCHAR(20),
	PRIMARY KEY (MAHOADON, MACHITIETSANPHAM)
)